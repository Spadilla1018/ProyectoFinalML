{% extends "base.html" %}
{% block content %}
<h1 class="text-2xl md:text-3xl font-bold mb-4">Lotes · Fresa &amp; Mora (0.0%)</h1>

<div class="grid lg:grid-cols-2 gap-6">
  <section class="rounded-2xl glass p-5 shadow-soft">
    <h2 class="font-semibold mb-3 flex items-center gap-2">
      <i class="ti ti-barrel"></i> Crear lote
    </h2>
    <form method="post" action="{{ url_for('batches_create') }}" class="space-y-3">
      <div>
        <label class="block text-sm font-medium mb-1">Código (ej: FM-2025-001)</label>
        <input name="code" required class="w-full rounded-lg border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900">
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Sabor</label>
        <select name="flavor_id" class="w-full rounded-lg border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900">
          {% for f in flavors %}<option value="{{ f.id }}">{{ f.name }}</option>{% endfor %}
        </select>
      </div>
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium mb-1">Fecha inicio</label>
          <input type="date" name="start_date" required class="w-full rounded-lg border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Días objetivo</label>
          <input type="number" name="target_days" value="14" min="1" class="w-full rounded-lg border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900">
        </div>
      </div>
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium mb-1">Volumen (L)</label>
          <input type="number" step="0.1" name="volume_l" value="20" class="w-full rounded-lg border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Levadura</label>
          <input name="yeast" class="w-full rounded-lg border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900" placeholder="Sacch. cerevisiae...">
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Notas</label>
        <textarea name="notes" rows="2" class="w-full rounded-lg border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900"></textarea>
      </div>
      <button class="px-4 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700">Crear</button>
    </form>
  </section>

  <section class="rounded-2xl glass p-5 shadow-soft">
    <h2 class="font-semibold mb-3 flex items-center gap-2">
      <i class="ti ti-list"></i> Lotes
    </h2>
    <div class="divide-y divide-white/60 dark:divide-white/10">
      {% for b in batches %}
      <a class="block py-3 hover:bg-white/60 dark:hover:bg-slate-800 rounded-lg px-3"
         href="{{ url_for('batch_detail', batch_id=b.id) }}">
        <div class="flex justify-between">
          <div>
            <div class="font-semibold">{{ b.code }}</div>
            <div class="text-sm text-slate-600 dark:text-slate-300">{{ b.flavor.name }} · {{ b.start_date }} · {{ b.status.value }}</div>
          </div>
          <div class="text-sm text-slate-600 dark:text-slate-300">{{ b.volume_l }} L</div>
        </div>
      </a>
      {% else %}
      <div class="py-6 text-slate-500 dark:text-slate-400">Sin lotes aún.</div>
      {% endfor %}
    </div>
  </section>
</div>
{% endblock %}
